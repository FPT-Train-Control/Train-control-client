<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" sizes="32x32" href="./a.png">
    <title>H·ªá Th·ªëng Gi√°m S√°t V√† ƒêi·ªÅu Khi·ªÉn Giao C·∫Øt ƒê∆∞·ªùng S·∫Øt Th√¥ng Minh</title>
    <link rel="stylesheet" href="./styles.css">
    <!-- SheetJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- jsPDF and html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- docx -->
    <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
  </head>
  <body>
    <header>
      <img src="./a.png" alt="Logo">
      <div>
        <div class="banner">ƒê∆Ø·ªúNG S·∫ÆT VI·ªÜT NAM</div>
        <div class="banner">H·ªá Th·ªëng Gi√°m S√°t V√† ƒêi·ªÅu Khi·ªÉn Giao C·∫Øt ƒê∆∞·ªùng S·∫Øt Th√¥ng Minh</div>
      </div>
      <img src="./OIP-removebg-preview.png" alt="Logo 2" style="transform: scaleX(-1);">
    </header>
    <div class="nav-bar">
      <button>Th√¥ng Tin T√†u</button>
      <button>Ph√¢n t√≠ch d·ªØ li·ªáu</button>
      <button>B·∫£ng ƒêi·ªÅu Khi·ªÉn</button>
    </div>
    <div id="sectionHoSoTau">
      <h1>Th√¥ng Tin T√†u</h1>
      <div class="controls">
        <input type="text" id="searchInput" placeholder="Search..." />
        <select id="filterTenTau">
          <option value="">T·∫•t C·∫£ T√™n T√†u</option>
        </select>
        <select id="filterTuyen">
          <option value="">T·∫•t C·∫£ Tuy·∫øn</option>
        </select>
        <select id="speedUnit">
          <option value="kmh">V·∫≠n T·ªëc: km/gi·ªù</option>
          <option value="mh">V·∫≠n T·ªëc: m/gi·ªù</option>
          <option value="ms">V·∫≠n T·ªëc: m/gi√¢y</option>
          <option value="cms">V·∫≠n T·ªëc: cm/gi√¢y</option>
        </select>
        <input type="date" id="dateFrom" />
        <input type="date" id="dateTo" />
        <input type="time" id="timeFrom" />
        <input type="time" id="timeTo" />
        <button id="exportExcel">üìä Excel</button>
        <button id="exportPDF">üìÑ PDF</button>
        <button id="exportDOCX">üìã B√°o c√°o</button>
      </div>
      <table id="trainTable">
        <thead>
          <tr>
            <th data-key="STT">STT</th>
            <th data-key="T√™n T√†u">T√™n T√†u</th>
            <th data-key="Tuy·∫øn">Tuy·∫øn</th>
            <th data-key="Tr·∫°m">Tr·∫°m</th>
            <th data-key="V·∫≠n T·ªëc">V·∫≠n T·ªëc</th>
            <th>Ng√†y ƒê·∫øn</th>
            <th>Gi·ªù ƒê·∫øn</th>
            <th>Ng√†y R·ªùi</th>
            <th>Gi·ªù R·ªùi</th>
            <th data-key="Tr·∫°ng Th√°i">Tr·∫°ng Th√°i</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div id="sectionPhanTich" style="display:none;">
      <h1>Ph√¢n T√≠ch D·ªØ Li·ªáu</h1>
      <div>
        <h3>1. T·ªëc ƒê·ªô Trung B√¨nh M·ªói T√†u</h3>
        <canvas id="avgSpeedChart" height="150"></canvas>
        <h3>2. S·ªë Chuy·∫øn M·ªói T√†u</h3>
        <canvas id="tripCountChart" height="150"></canvas>
        <h3>3. T·ªëc ƒê·ªô Trung B√¨nh M·ªói Ng√†y</h3>
        <canvas id="speedPerDayChart" height="150"></canvas>
      </div>
    </div>
    <div id="sectionBangDieuKhien" style="display:none;">
      <h1>B·∫£ng ƒêi·ªÅu Khi·ªÉn</h1>
      <div>
        <div class="dashboard-controls">
          <h3>üöß Barrier</h3>
          <div>
            <div>
              <div>
                <div>Tr·∫°ng th√°i</div>
                <span id="servoStateLabel"></span>
              </div>
              <img id="servoSatateLabelImg" src="./Barrier Open.png">
            </div>
            <button id="servoToggle">ƒêang t·∫£i tr·∫°ng th√°i...</button>
          </div>
        </div>
        <div class="dashboard-controls">
          <h3>‚öôÔ∏è T·ª± ƒê·ªông</h3>
          <div>
            <div>
              <div>
                <div>Tr·∫°ng th√°i</div>
                <span id="autoStateLabel"></span>
              </div>
              <img id="autoSatateLabelImg" src="./Automation.gif">
            </div>
            <button id="autoToggle">ƒêang t·∫£i tr·∫°ng th√°i...</button>
          </div>
        </div>
        <div class="collapsible-container">
          <button class="toggle-form-btn">‚öôÔ∏è C√†i ƒê·∫∑t</button>
          <form id="settingsForm" class="hidden">
            <label for="distance">Kho·∫£ng c√°ch K1 ‚Üí K2 (m):</label>
            <input type="number" id="distance" name="distance" placeholder="30" required>
            <label for="delay1">C·∫£nh b√°o s·ªõm (s):</label>
            <input type="number" id="delay1" name="delay1" placeholder="20" required>
            <label for="delay2">ƒê√≥ng barrier tr∆∞·ªõc (s):</label>
            <input type="number" id="delay2" name="delay2" placeholder="10" required>
            <button type="submit">üíæ L∆∞u</button>
          </form>
        </div>
      </div>
    </div>
    <script defer src="./script.js"></script>
  </body>
</html>
